<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Admin cluster and Rancher server configuration | Rancher on HPE SimpliVity</title>
    <meta name="generator" content="VuePress 1.4.1">
    
    <meta name="description" content="">
    <link rel="preload" href="/Rancher-on-SimpliVity/MVI1/assets/css/0.styles.3380d368.css" as="style"><link rel="preload" href="/Rancher-on-SimpliVity/MVI1/assets/js/app.e90d8c3d.js" as="script"><link rel="preload" href="/Rancher-on-SimpliVity/MVI1/assets/js/2.568917a2.js" as="script"><link rel="preload" href="/Rancher-on-SimpliVity/MVI1/assets/js/19.d31fcfd1.js" as="script"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/10.950c53f1.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/11.799675f2.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/12.ad062402.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/13.dcf86484.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/14.696faa8e.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/15.17134b8a.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/16.3a087d9a.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/17.efc5f861.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/18.6ac0187c.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/20.27d9b288.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/21.f4ba2f12.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/22.75ab758b.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/23.49ef815b.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/24.52d4f76d.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/25.0e890051.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/26.f2a7e024.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/27.3fb9382b.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/28.f55b52f4.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/29.12f9f4e4.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/3.b9eb5edd.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/30.c64afc1a.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/31.a7bbe5f9.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/32.988e967d.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/33.ee55ffdb.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/34.4b8a6dec.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/35.a84a7f5e.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/36.0610bba0.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/37.e5304677.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/38.f8f0dcfa.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/39.fd4b6322.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/4.e11c904b.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/40.ec3a4be6.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/41.72963612.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/42.29ab326d.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/43.d7369dcb.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/44.3d0706ca.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/45.464787da.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/46.23e19ff3.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/47.b654f690.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/48.5a53cd2b.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/5.beaec2af.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/6.ebbb2527.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/7.e1a75b56.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/8.f92082e1.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/9.c47cd23e.js">
    <link rel="stylesheet" href="/Rancher-on-SimpliVity/MVI1/assets/css/0.styles.3380d368.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Rancher-on-SimpliVity/MVI1/" class="home-link router-link-active"><!----> <span class="site-name">Rancher on HPE SimpliVity</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Rancher-on-SimpliVity/MVI1/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/Rancher-on-SimpliVity/MVI1/blog/" class="nav-link">
  Blog
</a></div> <a href="https://github.com/Rancher-on-SimpliVity" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Rancher-on-SimpliVity/MVI1/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/Rancher-on-SimpliVity/MVI1/blog/" class="nav-link">
  Blog
</a></div> <a href="https://github.com/Rancher-on-SimpliVity" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/Rancher-on-SimpliVity/MVI1/summary.html" class="sidebar-link">Executive summary</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Release Notes</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution overview</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution components</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Preparing the environment </span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Configuring the solution</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Rancher-on-SimpliVity/MVI1/config-core/ansible-config.html" class="sidebar-link">Ansible configuration</a></li><li><a href="/Rancher-on-SimpliVity/MVI1/config-core/proxy-config.html" class="sidebar-link">Proxy configuration</a></li><li><a href="/Rancher-on-SimpliVity/MVI1/config-core/edit-hosts.html" class="sidebar-link">Editing the hosts file</a></li><li><a href="/Rancher-on-SimpliVity/MVI1/config-core/vmware-config.html" class="sidebar-link">VMware configuration</a></li><li><a href="/Rancher-on-SimpliVity/MVI1/config-core/simplivity-config.html" class="sidebar-link">HPE SimpliVity configuration</a></li><li><a href="/Rancher-on-SimpliVity/MVI1/config-core/networking-config.html" class="sidebar-link">Networking configuration</a></li><li><a href="/Rancher-on-SimpliVity/MVI1/config-core/rancher-config.html" class="active sidebar-link">Admin cluster and Rancher server configuration</a></li><li><a href="/Rancher-on-SimpliVity/MVI1/config-core/rancher-user-config.html" class="sidebar-link">Rancher user cluster configuration</a></li><li><a href="/Rancher-on-SimpliVity/MVI1/config-core/lbs-config.html" class="sidebar-link">Load balancer configuration</a></li><li><a href="/Rancher-on-SimpliVity/MVI1/config-core/csi-storage-config.html" class="sidebar-link">Container Storage Interface (CSI) configuration</a></li><li><a href="/Rancher-on-SimpliVity/MVI1/config-core/group-vars.html" class="sidebar-link">Inventory group variables</a></li><li><a href="/Rancher-on-SimpliVity/MVI1/config-core/edit-vault.html" class="sidebar-link">Protecting sensitive information</a></li><li><a href="/Rancher-on-SimpliVity/MVI1/config-core/vars-sample.html" class="sidebar-link">Sample vars file</a></li><li><a href="/Rancher-on-SimpliVity/MVI1/config-core/vault-sample.html" class="sidebar-link">Sample vault file</a></li><li><a href="/Rancher-on-SimpliVity/MVI1/config-core/hosts-sample.html" class="sidebar-link">Sample hosts file</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Running the playbooks</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Post deployment tasks</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Appendices</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="admin-cluster-and-rancher-server-configuration"><a href="#admin-cluster-and-rancher-server-configuration" class="header-anchor">#</a> Admin cluster and Rancher server configuration</h1> <p>The playbooks deploy an admin cluster and a separate user cluster. The user cluster
is deployed from the Rancher server installed on the admin cluster and the configuration for the user cluster is
documented <a href="rancher-user-config">here</a>.</p> <p>The nodes in the admin cluster are determined by the
entries in the <code>hosts</code> file and are provisioned by the playbooks based on the configuration in this section.</p> <p>Rancher configuration is specified using the <code>rancher</code> dictionary element in the <code>group_vars/all/vars.yml</code> file:</p> <table><thead><tr><th style="text-align:left;">Variable</th> <th style="text-align:left;">File</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>rancher.url</code></td> <td style="text-align:left;">group_vars/all/vars.yml</td> <td style="text-align:left;">FQDN at which Rancher Server can be reached</td></tr> <tr><td style="text-align:left;"><code>rancher.hostname</code></td> <td style="text-align:left;">group_vars/all/vars.yml</td> <td style="text-align:left;">Usually the same FQDN as the one in <code>rancher.url</code> but not necessarily</td></tr> <tr><td style="text-align:left;"><code>rancher.validate_certs</code></td> <td style="text-align:left;">group_vars/all/vars.yml</td> <td style="text-align:left;"><code>False</code></td></tr> <tr><td style="text-align:left;"><code>rancher.apiversion</code></td> <td style="text-align:left;">group_vars/all/vars.yml</td> <td style="text-align:left;">Playbooks designed for v3 of the API</td></tr> <tr><td style="text-align:left;"><code>rancher.engineInstallURL</code></td> <td style="text-align:left;">group_vars/all/vars.yml</td> <td style="text-align:left;">Location of script for installing Docker on all node templates</td></tr></tbody></table> <p>An example <code>rancher</code> structure is shown below:</p> <div class="language- extra-class"><pre class="language-text"><code>rancher:
  url: https://lb1.hpe.org
  hostname: lb1.hpe.org
  validate_certs: False
  apiversion: v3
  engineInstallURL: 'https://releases.rancher.com/install-docker/19.03.sh'
</code></pre></div><p>General configuration variables are shown in the table below:</p> <table><thead><tr><th style="text-align:left;">Variable</th> <th style="text-align:left;">File</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>cluster_name</code></td> <td style="text-align:left;">group_vars/all/vars.yml</td> <td style="text-align:left;">Name of the K8S admin cluster</td></tr> <tr><td style="text-align:left;"><code>admin_folder</code></td> <td style="text-align:left;">group_vars/all/vars.yml</td> <td style="text-align:left;">Folder and pool name for Rancher admin cluster VMs and templates</td></tr> <tr><td style="text-align:left;"><code>admin_template</code></td> <td style="text-align:left;">group_vars/all/vars.yml</td> <td style="text-align:left;">Name for the admin template</td></tr></tbody></table> <p>If the <code>admin_template</code> already exists, it is used when provisioning the VMs for the admin cluster and
the load balancers. Otherwise, this template is created from the default Ubuntu OVA
specified in the file <code>playbooks/roles/kits/tasks/main.yml</code> and then used when provisioning the VMs.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/HewlettPackard/Rancher-on-SimpliVity/edit/docs-dev/docs-src/config-core/rancher-config.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Rancher-on-SimpliVity/MVI1/config-core/networking-config.html" class="prev">
        Networking configuration
      </a></span> <span class="next"><a href="/Rancher-on-SimpliVity/MVI1/config-core/rancher-user-config.html">
        Rancher user cluster configuration
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/Rancher-on-SimpliVity/MVI1/assets/js/app.e90d8c3d.js" defer></script><script src="/Rancher-on-SimpliVity/MVI1/assets/js/2.568917a2.js" defer></script><script src="/Rancher-on-SimpliVity/MVI1/assets/js/19.d31fcfd1.js" defer></script>
  </body>
</html>
