<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Create the Ansible node on Fedora | Rancher on HPE SimpliVity</title>
    <meta name="generator" content="VuePress 1.4.1">
    
    <meta name="description" content="">
    <link rel="preload" href="/Rancher-on-SimpliVity/MVI1/assets/css/0.styles.3380d368.css" as="style"><link rel="preload" href="/Rancher-on-SimpliVity/MVI1/assets/js/app.789fd792.js" as="script"><link rel="preload" href="/Rancher-on-SimpliVity/MVI1/assets/js/2.568917a2.js" as="script"><link rel="preload" href="/Rancher-on-SimpliVity/MVI1/assets/js/32.c5aecde9.js" as="script"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/10.06c43cf5.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/11.4c7b6590.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/12.09e9497f.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/13.cf9107b0.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/14.6b37f814.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/15.21bcd338.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/16.7a493f47.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/17.12ff4be1.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/18.6ee7966c.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/19.be02d0a8.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/20.f1334240.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/21.a2bbc1cc.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/22.55a36f40.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/23.80b69d5e.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/24.0357e388.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/25.b266b0ec.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/26.5c01dad6.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/27.7c499a5f.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/28.2fd159a9.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/29.ba7ad96c.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/3.4076c4db.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/30.ce362c92.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/31.f0416b2b.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/33.4aeac3b1.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/34.825193f8.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/35.2c62f183.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/36.7b16d7da.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/37.58d6c27e.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/38.2ec03593.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/39.43ba15c4.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/4.e11c904b.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/40.722542ca.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/41.d96eca0a.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/42.03324885.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/43.44e36c9f.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/44.a0239afa.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/45.ae30f4e1.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/46.ea04525d.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/47.1182fb4a.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/5.5f15ab02.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/6.ebbb2527.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/7.e1a75b56.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/8.48064e5e.js"><link rel="prefetch" href="/Rancher-on-SimpliVity/MVI1/assets/js/9.b8caf523.js">
    <link rel="stylesheet" href="/Rancher-on-SimpliVity/MVI1/assets/css/0.styles.3380d368.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Rancher-on-SimpliVity/MVI1/" class="home-link router-link-active"><!----> <span class="site-name">Rancher on HPE SimpliVity</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Rancher-on-SimpliVity/MVI1/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/Rancher-on-SimpliVity/MVI1/blog/" class="nav-link">
  Blog
</a></div> <a href="https://github.com/Rancher-on-SimpliVity" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Rancher-on-SimpliVity/MVI1/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/Rancher-on-SimpliVity/MVI1/blog/" class="nav-link">
  Blog
</a></div> <a href="https://github.com/Rancher-on-SimpliVity" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/Rancher-on-SimpliVity/MVI1/summary.html" class="sidebar-link">Executive summary</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Release Notes</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution overview</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution components</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Preparing the environment </span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Rancher-on-SimpliVity/MVI1/preparing/verify-prereqs.html" class="sidebar-link">Verify prerequisites</a></li><li><a href="/Rancher-on-SimpliVity/MVI1/preparing/ansible-fedora.html" class="active sidebar-link">Create the Ansible node on Fedora</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Rancher-on-SimpliVity/MVI1/preparing/ansible-fedora.html#create-the-fedora-vm" class="sidebar-link">Create the Fedora VM</a></li><li class="sidebar-sub-header"><a href="/Rancher-on-SimpliVity/MVI1/preparing/ansible-fedora.html#password-less-sudo" class="sidebar-link">Password-less sudo</a></li><li class="sidebar-sub-header"><a href="/Rancher-on-SimpliVity/MVI1/preparing/ansible-fedora.html#install-ansible-and-required-modules" class="sidebar-link">Install Ansible and required modules</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Configuring the solution</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Running the playbooks</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Post deployment tasks</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Appendices</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="create-the-ansible-node-on-fedora"><a href="#create-the-ansible-node-on-fedora" class="header-anchor">#</a> Create the Ansible node on Fedora</h1> <p>It is recommended that you deploy the Ansible controller on Fedora, to take advantage of the built-in support for
Python 3. The solution requires Fedora 31 and Ansible 2.9.5. It may be possible to run the playbooks
on other operating systems including RHEL and CentOS but
the playbooks have only been tested on Fedora. In addition to Python 3 and Ansible 2.9.5, a number of other packages
must be also be installed, as outlined below.</p> <p>The playbooks should be run from a non-privileged account - in the subsequent instructions, a user named <code>rancher</code> will be used.</p> <h2 id="create-the-fedora-vm"><a href="#create-the-fedora-vm" class="header-anchor">#</a> Create the Fedora VM</h2> <p>Create a Virtual Machine with the following characteristics:</p> <ul><li><strong>Guest OS:</strong> Red Hat Fedora Server 31 (64-bit)</li> <li><strong>Disk:</strong> 50G (thin provisioning)</li> <li><strong>CPU:</strong> 2</li> <li><strong>RAM:</strong> 4 GB</li> <li><strong>Ethernet Adapter:</strong> VMXNET3, connected to your Ansible or management network</li></ul> <p>Install Fedora Server 31 using the x64 64-bit ISO image.
In the <code>Software Selection</code> section, choose:</p> <ul><li><strong>Base Environment:</strong> Fedora Server Edition</li> <li><strong>Add-Ons for Selected Environment:</strong> Guest Agent</li></ul> <p>Select your language, keyboard layout, and timezone settings and re-boot when the installation finishes. Configure your networking and check your connectivity before moving on to the next section.</p> <h2 id="password-less-sudo"><a href="#password-less-sudo" class="header-anchor">#</a> Password-less sudo</h2> <p>Configure password-less <code>sudo</code> for the <code>rancher</code> user on the Ansible controller node by logging in
as <code>root</code> and issuing the command:</p> <div class="language- extra-class"><pre class="language-text"><code>$ usermod -a -G wheel rancher
</code></pre></div><p>The default <code>/etc/sudoers</code> file contains two lines for the group <code>wheel</code>. As the root user, run <code>visudo</code> to uncomment
the %wheel line containing the string <code>NOPASSWD:</code> and comment out the other %wheel line. When you are done,
it should look like this:</p> <div class="language- extra-class"><pre class="language-text"><code>## Allows people in group wheel to run all commands
#%wheel ALL=(ALL)       ALL

## Same thing without a password
%wheel ALL=(ALL)       NOPASSWD: ALL
</code></pre></div><p>The advantage of using <code>visudo</code> is that it will validate the changes to the file.</p> <h2 id="install-ansible-and-required-modules"><a href="#install-ansible-and-required-modules" class="header-anchor">#</a> Install Ansible and required modules</h2> <p>Log in to the Ansible controller node as the <code>rancher</code> user and run the following commands to install <code>git</code>, <code>ansible</code>
and the required Python dependencies:</p> <div class="language- extra-class"><pre class="language-text"><code>$ sudo dnf update -y --exclude=ansible
$ sudo dnf install -y git ansible python3-netaddr python3-requests python3-pyvmomi
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/HewlettPackard/Rancher-on-SimpliVity/edit/docs-dev/docs-src/preparing/ansible-fedora.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Rancher-on-SimpliVity/MVI1/preparing/verify-prereqs.html" class="prev">
        Verify prerequisites
      </a></span> <span class="next"><a href="/Rancher-on-SimpliVity/MVI1/config-core/ansible-config.html">
        Ansible configuration
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/Rancher-on-SimpliVity/MVI1/assets/js/app.789fd792.js" defer></script><script src="/Rancher-on-SimpliVity/MVI1/assets/js/2.568917a2.js" defer></script><script src="/Rancher-on-SimpliVity/MVI1/assets/js/32.c5aecde9.js" defer></script>
  </body>
</html>
